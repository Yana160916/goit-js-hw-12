{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet searchQuery = '';\nlet page = 1;\n\nconst createImageCard = (image) => {\n  const card = document.createElement('li');\n  card.innerHTML = `\n    <div class=\"card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      <div class=\"details\">\n        <p>Likes: ${image.likes}</p>\n        <p>Views: ${image.views}</p>\n        <p>Comments: ${image.comments}</p>\n        <p>Downloads: ${image.downloads}</p>\n      </div>\n    </div>\n  `;\n  return card;\n};\n\nconst addImagesToGallery = (images) => {\n  const gallery = document.querySelector('.images');\n  images.forEach((image) => {\n    const card = createImageCard(image);\n    gallery.appendChild(card);\n  });\n\n  const loadMoreBtn = document.querySelector('.load-more');\n  if (images.length < 15) {\n    loadMoreBtn.style.display = 'none';\n    alert(\"We're sorry, but you've reached the end of search results.\");\n  } else {\n    loadMoreBtn.style.display = 'block';\n  }\n};\n\nconst performSearch = async () => {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '42394453-5b1f47b766fae7b80cadc39a1',\n        q: searchQuery,\n        page: page,\n        per_page: 15\n      }\n    });\n\n    const images = response.data.hits;\n\n    addImagesToGallery(images);\n\n    // Optional: Scroll down to new images\n    const cardHeight = document.querySelector('.images li').offsetHeight;\n    window.scrollBy(0, cardHeight * 2);\n\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    alert('Error fetching images. Please try again.'); // Show a user-friendly error message\n  }\n};\n\ndocument.querySelector('.form').addEventListener('submit', async event => {\n  event.preventDefault();\n  searchQuery = event.target.input.value;\n  page = 1; \n  const gallery = document.querySelector('.images');\n  gallery.innerHTML = ''; // Clear the gallery before a new search\n  performSearch();\n});\n\ndocument.querySelector('.load-more').addEventListener('click', () => {\n  page++;\n  performSearch();\n});\n\n"],"names":["searchQuery","page","createImageCard","image","card","addImagesToGallery","images","gallery","loadMoreBtn","performSearch","axios","cardHeight","error","event"],"mappings":"svBAIA,IAAIA,EAAc,GACdC,EAAO,EAEX,MAAMC,EAAmBC,GAAU,CACjC,MAAMC,EAAO,SAAS,cAAc,IAAI,EACxC,OAAAA,EAAK,UAAY;AAAA;AAAA,kBAEDD,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,oBAEpCA,EAAM,KAAK;AAAA,oBACXA,EAAM,KAAK;AAAA,uBACRA,EAAM,QAAQ;AAAA,wBACbA,EAAM,SAAS;AAAA;AAAA;AAAA,IAI9BC,CACT,EAEMC,EAAsBC,GAAW,CACrC,MAAMC,EAAU,SAAS,cAAc,SAAS,EAChDD,EAAO,QAASH,GAAU,CACxB,MAAMC,EAAOF,EAAgBC,CAAK,EAClCI,EAAQ,YAAYH,CAAI,CAC5B,CAAG,EAED,MAAMI,EAAc,SAAS,cAAc,YAAY,EACnDF,EAAO,OAAS,IAClBE,EAAY,MAAM,QAAU,OAC5B,MAAM,4DAA4D,GAElEA,EAAY,MAAM,QAAU,OAEhC,EAEMC,EAAgB,SAAY,CAChC,GAAI,CAUF,MAAMH,GATW,MAAMI,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGV,EACH,KAAMC,EACN,SAAU,EACX,CACP,CAAK,GAEuB,KAAK,KAE7BI,EAAmBC,CAAM,EAGzB,MAAMK,EAAa,SAAS,cAAc,YAAY,EAAE,aACxD,OAAO,SAAS,EAAGA,EAAa,CAAC,CAElC,OAAQC,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,0CAA0C,CACjD,CACH,EAEA,SAAS,cAAc,OAAO,EAAE,iBAAiB,SAAU,MAAMC,GAAS,CACxEA,EAAM,eAAc,EACpBb,EAAca,EAAM,OAAO,MAAM,MACjCZ,EAAO,EACP,MAAMM,EAAU,SAAS,cAAc,SAAS,EAChDA,EAAQ,UAAY,GACpBE,GACF,CAAC,EAED,SAAS,cAAc,YAAY,EAAE,iBAAiB,QAAS,IAAM,CACnER,IACAQ,GACF,CAAC"}